let img = [
    {
        id: 10,
        img: "https://estaticos.elcolombiano.com/binrepository/847x565/34c0/780d565/none/11101/CYGY/colp-ext-104700_39108424_20211210090816.jpg",
    },
    {
        id: 11,
        img: "https://upload.wikimedia.org/wikipedia/commons/d/df/Hermoso_Atardecer_en_Popay%C3%A1n_%284279606793%29.jpg",
    },
    {
        id: 12,
        img: "https://www.todacolombia.com/imagenes/departamentos-de-colombia/Cesar/Cesar_departamento_1366x768.jpg",
    },
    {
        id: 13,
        img: "https://www.universocentro.com/portals/0/R110/choco1.jpg",

    },
    {
        id: 14,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQLZYZnyOohvSxq0A1kbsQoTVnY8fHCfpIuwQ&s",
    },
    {
        id: 15,
        img: "https://www.todacolombia.com/imagenes/departamentos-de-colombia/Cundinamarca/Cundinamarca_departamento_1366x768.jpg",
    },
    {
        id: 17,
        img: "https://upload.wikimedia.org/wikipedia/commons/1/10/Chiribiquete_view.jpg",
    },
    {
        id: 19,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6Jl3iIcJDYzTKwaqvW5iQ52iEG8YKvIjv2Q&s",

    },
    {
        id: 20,
        img: "https://upload.wikimedia.org/wikipedia/commons/7/78/El_Rodadero_Santa_Marta_Magdalena_Colombia.jpg",

    },
    {
        id: 22,
        img: "https://upload.wikimedia.org/wikipedia/commons/a/a9/Santuario_Nacional_de_Las_Lajas_04.jpg",

    },
    {
        id: 9,
        img: "https://www.triviantes.com/wp-content/uploads/2023/03/departamento-caqueta-2.jpg",

    },
    {
        id: 16,
        img: "https://radionacional-v3.s3.amazonaws.com/s3fs-public/styles/portadas_relaciona_4_3/public/node/article/field_image/%C2%A9GabrielPerez%20Guain%C3%ADa%20peque%C3%B1a%20.jpg?h=8d7628e1&itok=5pfDv63l",
    },
    {
        id: 1,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRAxWn-nkHNGy8_O8UhXCbpICn3DbxU58DF8Q&s"
    },
    {
        id: 2,
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/91/Panor%C3%A1micaJard%C3%ADnAntioquia.jpg/1200px-Panor%C3%A1micaJard%C3%ADnAntioquia.jpg"
    },
    {
        id: 3,
        img: "https://radionacional-v3.s3.amazonaws.com/s3fs-public/styles/portadas_relaciona_4_3/public/node/article/field_image/Arauquita%205.jpg?h=7b436a88&itok=r-yrV8H7"
    },
    {
        id: 4,
        img: "https://www.triviantes.com/wp-content/uploads/2023/03/departamento-atlantico-1.jpg"
    },
    {
        id: 5,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGeQb13aCiiV4itgLc1B5_Q4FClpmdcX56fg&s"
    },
    {
        id: 6,
        img: "https://www.todacolombia.com/imagenes/departamentos-de-colombia/Bolivar/Bolivar_departamento_1366x768.jpg"
    },
    {
        id: 23,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQb7enpNstEUYmTfgEiBlSLwshOlYTSt9cMfg&s"
    },
    {
        id: 24,
        img: "https://images.mnstatic.com/e8/69/e8693224239ace3db0bbe04628799463.jpg"
    },
    {
        id: 25,
        img: "https://www.triviantes.com/wp-content/uploads/2023/01/lo-mejor-de-quindio-1.jpeg"
    },
    {
        id: 26,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQM3ay3TEeKmSO_nmH4XH4Tcyo5qN9TYa49tQ&s"
    },
    {
        id: 27,
        img: "https://s3.amazonaws.com/rtvc-assets-senalcolombia.gov.co/s3fs-public/styles/imagen_noticia/public/field/image/San-andres-RTVC.jpg?itok=iVcNPiNw"
    },
    {
        id: 28,
        img: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Guadalupe%2C_Santander%2C_Colombia.JPG/270px-Guadalupe%2C_Santander%2C_Colombia.JPG"
    },
    {
        id: 30,
        img: "https://elcronista.co/assets/media/estudio-revelo-que-el-tolima-se-encuentra-entre-los-departamentos-con-mayor-miseria.jpg"
    },
    {
        id: 31,
        img: "https://www.todacolombia.com/imagenes/departamentos-de-colombia/Valle-del-Cauca/Valle_del_Cauca_departamento_1366x768.jpg"
    },
    {
        id: 32,
        img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSd5yrqX8CgSreN1SRWVEc16RlwcwfHSJOTSg&s"
    },
    {
        id: 33,
        img: "https://a.travel-assets.com/findyours-php/viewfinder/images/res70/474000/474758-El-Tuparro-National-Natural-Park.jpg"
    },
    {
        id: 8,
        img: "https://encolombia.com/wp-content/uploads/2012/12/Departamento-de-Caldas-330x205.jpg"
    },
    {
        id: 7,
        img: "https://media.istockphoto.com/id/1160667908/es/foto/calle-villa-de-leyva-con-bandera-colombiana.jpg?s=1024x1024&w=is&k=20&c=9DgX0JlYgzWOry_FsMYug26PG4BBc8W0cqF1mRHk0vA="
    },
    {
        id: 18,
        img: "https://www.triviantes.com/wp-content/uploads/2022/12/turismo-en-huila-1.jpg"
    },
    {
        id: 21,
        img: "https://www.triviantes.com/wp-content/uploads/2022/10/departamento-meta-de-colombia-1.jpeg"
    },
    {
        id: 29,
        img: "https://www.triviantes.com/wp-content/uploads/2023/08/departamento-sucre-de-colombia-2.jpg"
    }

]


let infoDescript = document.getElementById("country-info");

fetch("https://api-colombia.com/api/v1/Country/Colombia")
    .then((response) => response.json())
    .then((data) => {
        let countryName = data.name;
        let Description = data.description;
        infoDescript.innerHTML = `
                    <h1>${countryName}</h1>
                    <p>${Description}</p>
                `;
    })
    .catch((error) => {
        console.error("Error fetching data:", error);
        infoDescript.innerHTML = `
                    <h1>Error</h1>
                    <p>No se pudo cargar la información de Colombia.</p>
                `;
    });

let departmentsContainer = document.getElementById("departments");
let filterNameInput = document.getElementById("filter-name");
let filterPopulationSelect = document.getElementById("filter-population");

let departmentsData = [];

fetch("https://api-colombia.com/api/v1/Department")
    .then((response) => response.json())
    .then((data) => {
        departmentsData = data;
        displayDepartments(data);
    })
    .catch((error) => console.error("Error fetching departments:", error));

let displayDepartments = (departments) => {
    let tarjetasHTML = departments.map(department => {
        let imageObj = img.find(image => image.id === department.id);
        let imageUrl = imageObj ? imageObj.img : "./assets/recursos-img/colombia.jpg";

        return `
            <div class="card">
                <img src="${imageUrl}" class="card-img-top" alt="${department.name}" style="object-fit: cover;"/>
                <div class="card-body">
                    <h5 class="card-title">Departamento: ${department.name}</h5>
                    <p>Municipios: ${department.municipalities}</p>
                    <p>Población: ${department.population}</p>
                    <div class="d-flex justify-content-between align-items-center">
                        <p>Más detalles</p>
                        <a href="./details.html?id=${department.id}" class="btn btn-primary">Detalles</a>
                    </div>
                </div>
            </div>
        `;
    })

    departmentsContainer.innerHTML = tarjetasHTML != "" ? tarjetasHTML : "<p class=' text-center text-white col-4 bg-dark bg-opacity-75 rounded-3 mb-4'>No se encontraron departamentos</p>";
};
// Maneja el evento de entrada del filtro de nombre
filterNameInput.addEventListener("input", () => {
    applyFilters();
});

// Maneja el evento de cambio del filtro de población
filterPopulationSelect.addEventListener("change", () => {
    applyFilters();
});

// Función para aplicar los filtros combinados
let applyFilters = () => {
    let name = filterNameInput.value.toLowerCase();
    let populationAmount = filterPopulationSelect.value;
    let filteredDepartments = departmentsData;

    // Aplica el filtro de nombre
    if (name) {
        filteredDepartments = filteredDepartments.filter(department =>
            department.name.toLowerCase().includes(name)
        );
    }

    // Aplica el filtro de población
    if (populationAmount) {
        filteredDepartments = filteredDepartments.filter(department => {
            let population = department.population;
            if (populationAmount === "low") {
                return population < 1000000;
            } else if (populationAmount === "medium") {
                return population >= 1000000 && population <= 2000000;
            } else if (populationAmount === "high") {
                return population > 2000000;
            }
            return false;
        });
    }

    // Muestra los departamentos filtrados
    displayDepartments(filteredDepartments);
};
